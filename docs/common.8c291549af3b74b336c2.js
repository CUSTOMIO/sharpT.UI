(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{NyiH:function(e,t,n){"use strict";n.d(t,"a",function(){return c});var i=n("tyNb"),r=n("XNiG"),o=n("pLZG"),s=n("rW8v"),a=n("fXoL");let c=(()=>{class e{constructor(e){this.router=e,this.subject=new r.a,this.keepAfterRouteChange=!1,this.router.events.subscribe(e=>{e instanceof i.b&&(this.keepAfterRouteChange?this.keepAfterRouteChange=!1:this.clear())})}onAlert(e){return this.subject.asObservable().pipe(Object(o.a)(t=>t&&t.alertId===e))}show(e,t,n){const i=new s.i({message:t,type:e,alertId:n});this.notify(i)}notify(e){console.log(e),this.keepAfterRouteChange=e.keepAfterRouteChange,this.subject.next(e)}clear(e){this.subject.next(new s.i({alertId:e}))}}return e.\u0275fac=function(t){return new(t||e)(a.Xb(i.c))},e.\u0275prov=a.Jb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},tWCx:function(e,t,n){"use strict";n.d(t,"a",function(){return M});var i=n("3Pt+"),r=n("0IaG"),o=n("fXoL"),s=n("AytR"),a=n("lJxs"),c=n("JIr8"),l=n("z6cu"),f=n("tk/3");let b=(()=>{class e{constructor(e){this.http=e}generateOtp(e){return this.http.post(`${s.a.api_endpoint}/generate-otp`,{email:e})}VerifyOtp(e){return this.http.post(`${s.a.api_endpoint}/verify-otp`,e).pipe(Object(a.a)(e=>e),Object(c.a)(e=>Object(l.a)("Something went wrong!")))}}return e.\u0275fac=function(t){return new(t||e)(o.Xb(f.a))},e.\u0275prov=o.Jb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var d=n("ofXK"),p=n("NFeN"),g=n("kmnG"),u=n("qFsG"),m=n("bTqV"),h=n("bv9b");function v(e,t){1&e&&o.Ob(0,"mat-progress-bar",15)}function y(e,t){if(1&e&&o.Ob(0,"p",16),2&e){const e=o.fc();o.lc("innerHtml",e.successMessage.message,o.wc)}}function O(e,t){if(1&e&&o.Ob(0,"p",16),2&e){const e=o.fc();o.lc("innerHtml",e.verifyMessage.message,o.wc)}}function C(e,t){if(1&e&&o.Ob(0,"span",17),2&e){const e=o.fc();o.lc("innerHtml",e.errorMessage,o.wc)}}let M=(()=>{class e{constructor(e,t,n,i){this.authService=e,this.formbuilder=t,this.data=n,this.dialogRef=i,this.isVerified=!1,this.isLoading=!1,this.clicked=!1}ngOnInit(){this.data.sendEmail&&this.generateOtp(),this.verifyForm=this.formbuilder.group({otp:[null,[i.u.required]],email:[this.data.email,[i.u.required]]})}generateOtp(){this.isLoading=!0,this.authService.generateOtp(this.data.email).subscribe({next:e=>{e&&(this.successMessage=e,this.isLoading=!1)},error:e=>{e&&(this.errorMessage=!0,this.isLoading=!1,console.log(this.errorMessage))}})}verifyOtp(){this.isLoading=!0,this.authService.VerifyOtp(this.verifyForm.value).subscribe({next:e=>{this.isLoading=!1,e.message&&(this.verifyMessage=e.message,this.closeDialog()),e.error&&(this.errorMessage=e.error,this.clicked=!1)},error:e=>{console.log("This is err"+e),this.clicked=!1,this.isLoading=!1,this.errorMessage=!0}})}closeDialog(){this.dialogRef.close(null!==this.verifyMessage?{data:{otp:this.verifyForm.controls.otp.value,message:this.verifyMessage}}:{data:""})}}return e.\u0275fac=function(t){return new(t||e)(o.Nb(b),o.Nb(i.e),o.Nb(r.a),o.Nb(r.f))},e.\u0275cmp=o.Hb({type:e,selectors:[["app-verify"]],decls:24,vars:6,consts:[[1,"verify-body"],["mode","indeterminate",4,"ngIf"],[1,"top-div"],["mat-dialog-title",""],[1,"close-button",3,"click"],["mat-dialog-content",""],[1,"mat-caption"],[3,"innerHtml",4,"ngIf"],[3,"formGroup"],["appearance","standard",1,"m-mq-auto"],["matInput","","type","text","inputmode","numeric","autocomplete","one-time-code","pattern","\\d{6}","formControlName","otp"],["type","submit","mat-flat-button","","color","primary",1,"m-mq-auto",3,"disabled","click"],["class","error-msg",3,"innerHtml",4,"ngIf"],[1,"resend-container"],[1,"resend",3,"click"],["mode","indeterminate"],[3,"innerHtml"],[1,"error-msg",3,"innerHtml"]],template:function(e,t){1&e&&(o.Tb(0,"div",0),o.Cc(1,v,1,0,"mat-progress-bar",1),o.Tb(2,"div",2),o.Tb(3,"h1",3),o.Ec(4,"Verify Email"),o.Sb(),o.Tb(5,"mat-icon",4),o.bc("click",function(){return t.closeDialog()}),o.Ec(6,"close"),o.Sb(),o.Sb(),o.Tb(7,"div",5),o.Tb(8,"p",6),o.Ec(9,"Once your email is verified, you cannot change the form"),o.Sb(),o.Cc(10,y,1,1,"p",7),o.Tb(11,"form",8),o.Tb(12,"mat-form-field",9),o.Tb(13,"mat-label"),o.Ec(14,"Type your OTP here"),o.Sb(),o.Ob(15,"input",10),o.Sb(),o.Tb(16,"button",11),o.bc("click",function(){return t.verifyOtp(),t.clicked=!0}),o.Ec(17,"Verify OTP"),o.Sb(),o.Sb(),o.Cc(18,O,1,1,"p",7),o.Cc(19,C,1,1,"span",12),o.Tb(20,"p",13),o.Ec(21,"Didn't recieve? "),o.Tb(22,"span",14),o.bc("click",function(){return t.generateOtp()}),o.Ec(23,"Resend"),o.Sb(),o.Sb(),o.Sb(),o.Sb()),2&e&&(o.Cb(1),o.lc("ngIf",t.isLoading),o.Cb(9),o.lc("ngIf",t.successMessage),o.Cb(1),o.lc("formGroup",t.verifyForm),o.Cb(5),o.lc("disabled",!t.verifyForm.valid||t.clicked),o.Cb(2),o.lc("ngIf",t.verifyMessage),o.Cb(1),o.lc("ngIf",t.errorMessage))},directives:[d.k,r.g,p.a,r.d,i.v,i.o,i.g,g.b,g.f,u.b,i.d,i.s,i.n,i.f,m.b,h.a],styles:[".verify-body[_ngcontent-%COMP%]{position:relative}.verify-body[_ngcontent-%COMP%]   mat-progress-bar[_ngcontent-%COMP%]{margin:10px 0}.verify-body[_ngcontent-%COMP%]   .top-div[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{float:left;width:90%}.verify-body[_ngcontent-%COMP%]   .close-button[_ngcontent-%COMP%]{width:10%;cursor:pointer}.resend-container[_ngcontent-%COMP%]{margin-top:10.5px;color:grey;font-size:75%}.resend-container[_ngcontent-%COMP%]   .resend[_ngcontent-%COMP%]{text-decoration:underline;cursor:pointer;color:#000!important}.email[_ngcontent-%COMP%]{font-weight:500}.mat-form-field[_ngcontent-%COMP%]{width:140px!important;margin-right:30px}.error-msg[_ngcontent-%COMP%]{color:red!important}@media only screen and (max-width:600px){.mat-form-field[_ngcontent-%COMP%]{width:100%!important}}"]}),e})()}}]);