(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{tWCx:function(e,t,i){"use strict";i.d(t,"a",function(){return w});var r=i("3Pt+"),n=i("0IaG"),o=i("rW8v"),s=i("fXoL"),a=i("AytR"),c=i("lJxs"),d=i("JIr8"),m=i("z6cu"),l=i("tk/3");let f=(()=>{class e{constructor(e){this.http=e}generateOtp(e){return this.http.post(`${a.a.api_endpoint}/generate-otp`,{email:e})}VerifyOtp(e){return this.http.post(`${a.a.api_endpoint}/verify-otp`,e).pipe(Object(c.a)(e=>e),Object(d.a)(e=>Object(m.a)("Something went wrong!")))}}return e.\u0275fac=function(t){return new(t||e)(s.Xb(l.a))},e.\u0275prov=s.Jb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var p=i("NyiH"),h=i("ofXK"),g=i("NFeN"),b=i("kmnG"),u=i("qFsG"),v=i("bTqV"),y=i("bv9b");function O(e,t){1&e&&s.Ob(0,"mat-progress-bar",15)}function C(e,t){if(1&e&&s.Ob(0,"p",16),2&e){const e=s.fc();s.kc("innerHtml","An otp has been send to "+e.verifyForm.get("email").value,s.wc)}}function S(e,t){if(1&e&&s.Ob(0,"span",17),2&e){const e=s.fc();s.kc("innerHtml",e.errorMessage,s.wc)}}let w=(()=>{class e{constructor(e,t,i,r,n){this.authService=e,this.formbuilder=t,this.notificationService=i,this.data=r,this.dialogRef=n,this.emailSend=!1,this.isVerified=!1,this.verified=!1,this.isLoading=!1}ngOnInit(){this.data.sendEmail&&this.generateOtp(),this.verifyForm=this.formbuilder.group({otp:[null,[r.s.required]],email:[this.data.email,[r.s.required]]})}generateOtp(){this.error=!1,this.isLoading=!0,this.authService.generateOtp(this.data.email).subscribe({next:e=>{e.message?this.emailSend=e.message:(this.error=!0,this.errorMessage="Check your email and try again."),this.isLoading=!1},error:e=>{e&&(this.error=!0,this.errorMessage="Oops, something is not right with our servers!!"),this.isLoading=!1}})}verifyOtp(){this.isLoading=!0,this.error=!1,this.authService.VerifyOtp(this.verifyForm.value).subscribe({next:e=>{if(this.isLoading=!1,e.message)return this.verified=e.message,void this.closeDialog();this.error=!0,this.errorMessage="Check your otp once again"},error:e=>{this.error=!0,this.errorMessage="Oops, something is not right with our servers!!",this.isLoading=!1}})}closeDialog(){this.verified?(this.dialogRef.close({data:{otp:this.verifyForm.controls.otp.value,message:this.emailSend}}),this.notificationService.show(o.a.Success,"Your Email is verified")):this.isVerified||(this.notificationService.show(o.a.Warning,"Your Email is NOT verified"),this.dialogRef.close({data:""}))}}return e.\u0275fac=function(t){return new(t||e)(s.Nb(f),s.Nb(r.d),s.Nb(p.a),s.Nb(n.a),s.Nb(n.e))},e.\u0275cmp=s.Hb({type:e,selectors:[["app-verify"]],decls:23,vars:5,consts:[[1,"verify-body"],["mode","indeterminate",4,"ngIf"],[1,"top-div"],["mat-dialog-title",""],[1,"close-button",3,"click"],["mat-dialog-content",""],[1,"mat-caption"],[3,"innerHtml",4,"ngIf"],[3,"formGroup"],["appearance","standard",1,"m-mq-auto"],["matInput","","type","text","inputmode","numeric","autocomplete","one-time-code","pattern","\\d{6}","formControlName","otp"],["type","submit","mat-flat-button","","color","primary",1,"m-mq-auto",3,"disabled","click"],["class","error-msg",3,"innerHtml",4,"ngIf"],[1,"resend-container"],[1,"resend",3,"click"],["mode","indeterminate"],[3,"innerHtml"],[1,"error-msg",3,"innerHtml"]],template:function(e,t){1&e&&(s.Tb(0,"div",0),s.Cc(1,O,1,0,"mat-progress-bar",1),s.Tb(2,"div",2),s.Tb(3,"h1",3),s.Dc(4,"Verify Email"),s.Sb(),s.Tb(5,"mat-icon",4),s.bc("click",function(){return t.closeDialog()}),s.Dc(6,"close"),s.Sb(),s.Sb(),s.Tb(7,"div",5),s.Tb(8,"p",6),s.Dc(9,"Once your email is verified, you cannot change the form"),s.Sb(),s.Cc(10,C,1,1,"p",7),s.Tb(11,"form",8),s.Tb(12,"mat-form-field",9),s.Tb(13,"mat-label"),s.Dc(14,"Type your OTP here"),s.Sb(),s.Ob(15,"input",10),s.Sb(),s.Tb(16,"button",11),s.bc("click",function(){return t.verifyOtp()}),s.Dc(17," Verify OTP "),s.Sb(),s.Sb(),s.Cc(18,S,1,1,"span",12),s.Tb(19,"p",13),s.Dc(20,"Didn't recieve? "),s.Tb(21,"span",14),s.bc("click",function(){return t.generateOtp()}),s.Dc(22,"Resend"),s.Sb(),s.Sb(),s.Sb(),s.Sb()),2&e&&(s.Cb(1),s.kc("ngIf",t.isLoading),s.Cb(9),s.kc("ngIf",t.emailSend),s.Cb(1),s.kc("formGroup",t.verifyForm),s.Cb(5),s.kc("disabled",!t.verifyForm.valid),s.Cb(2),s.kc("ngIf",t.error))},directives:[h.k,n.f,g.a,n.c,r.t,r.n,r.f,b.b,b.f,u.b,r.c,r.q,r.m,r.e,v.a,y.a],styles:[".verify-body[_ngcontent-%COMP%]{position:relative}.verify-body[_ngcontent-%COMP%]   mat-progress-bar[_ngcontent-%COMP%]{margin:10px 0}.verify-body[_ngcontent-%COMP%]   .top-div[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{float:left;width:90%}.verify-body[_ngcontent-%COMP%]   .close-button[_ngcontent-%COMP%]{width:10%;cursor:pointer}.resend-container[_ngcontent-%COMP%]{margin-top:10.5px;color:grey;font-size:75%}.resend-container[_ngcontent-%COMP%]   .resend[_ngcontent-%COMP%]{text-decoration:underline;cursor:pointer;color:#000!important}.email[_ngcontent-%COMP%]{font-weight:500}.mat-form-field[_ngcontent-%COMP%]{width:140px!important;margin-right:30px}.error-msg[_ngcontent-%COMP%]{color:red!important}@media only screen and (max-width:600px){.mat-form-field[_ngcontent-%COMP%]{width:100%!important}}"]}),e})()}}]);